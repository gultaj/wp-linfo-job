jQuery(document).ready(function(e){"use strict";function n(){var t=e.trim(e("#edit_key").val());if(t.length==6){var n={action:"check_job_key",obj_id:e("#obj_id").val(),user_key:t};e("#edit_key").parent().removeClass("has-error");e("#edit_key, #check_key").attr("disabled",true);e.post(ajax_object.ajax_url,n,function(t){if(t==="OK"){var r=e("#job_type").val()=="vacancy"?"вакансию":"резюме";if(confirm("Вы действительно хотите удалить "+r+"?")){n.action="remove_job";e.post(ajax_object.ajax_url,n,function(e){if(e==="OK"){console.log(e);var t=window.location.origin+window.location.pathname.replace(/id[0-9]+\/?/gi,"");window.location.replace(t)}})}else{e("#edit_key, #check_key").attr("disabled",false)}}else{e("#edit_key, #check_key").attr("disabled",false);alert("Неверный ключ")}})}else{e("#edit_key").parent().addClass("has-error")}return false}function r(t){var n=[];var r=["title","company","salary"];if(t.id=="send-resume")r=["resume_title","resume_salary","resume_company"];for(var i=0;i<r.length;i++){var s=e.trim(e("#"+r[i]).val()).length;if(!s){n.push({id:r[i],message:"Поле не может быть пустым"})}else if(s<3){n.push({id:r[i],message:"Количество символов не может быть меньше 3-х"})}}return n.length?n:false}function i(t,n){var r=[];for(var i=0;i<t.length;i++){var s=e("#"+t[i].id).parent();r.push("<li>"+e("label[for="+t[i].id+"]").text()+"</li>");var o='<span class="help-block">'+t[i].message+"</span>";s.addClass("has-error");s.append(o)}var u='<div class="alert alert-danger" role="alert">'+'<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span></button>'+"<strong>Чтобы продолжить устраните все ошибки!</strong>"+"<br><br>Поля с ошибками: <ul>"+r.join("")+"</ul> </div>";e(n).parents("form").prepend(u);e("body").scrollTop(0)}e("body").on("click","#check_key",n);var t='<div id="popover-group"><div class="input-group"><input type="text" id="edit_key" class="form-control input-sm"><span class="input-group-btn"><button class="btn btn-default btn-sm" id="check_key" type="button"> &raquo; </button></span></div>';e(".job__remove").popover({html:true,content:t,placement:"bottom"});e("#send-vacancy,#send-resume").click(function(t){var n;e(".has-error").removeClass("has-error");e(".help-block").remove();e(".alert").remove();if(n=r(t.target)){i(n,t.target);return false}});e(".job__tabs a").click(function(){if(e(this).parent().hasClass("active"))return false;e(".job__tabs li").removeClass("active");e(this).parent().addClass("active");e("#content form").hide();e("#"+this.id+"-form").show();return false})})